"use strict";let ax=function(t,e){e&&(t instanceof Array||(t=[t]),t={$nodes:t,...e}),document.addEventListener("DOMContentLoaded",function(){let e=ax.factory(t);t.id?document.querySelector("#"+t.id).replaceWith(e):document.body.appendChild(e)})};ax.extension={},ax.type={},ax.tag={},ax["throw"]=function(t){throw new Error(t)},ax.log=console.log.bind(console),ax.factory=function(t){let e=ax.type.is;return e["null"](t)?null:e.node(t)?t:e.nodelist(t)?ax.factory.nodelist(t):e.array(t)?ax.factory.array(t):e.promise(t)?ax.factory.promise(t):e.object(t)?ax.factory.object(t):e["function"](t)?ax.factory["function"](t):(e.undefined(t)&&ax.factory.undefined(),ax.factory.text(t))},ax.warn=console.warn.bind(console),ax.x=ax.extension,ax.type.is={},ax.factory.undefined=function(){ax["throw"]("Component is undefined.")},ax.factory.text=function(t){return document.createTextNode(" "+t+" ")},ax.factory.object=function(t){return this.object.element(t)},ax.factory.promise=function(t){let e=function(t){return 1===t.length&&(t=t[0]),ax.type.is.string(t)?t:JSON.stringify(t,null,2)};return this({$init:n=>{t.then(function(...t){n.$text=e(t)})["catch"](function(...t){n.$text=e(t)})}})},ax.factory.pipeline=[],ax.factory.nodelist=function(t){return this({$nodes:Array.from(t)})},ax.factory.array=function(t){return this({$tag:"div",$nodes:t})},ax.factory["function"]=function(t){const e=ax.a,n=ax.x;return this(t=ax.type.is["class"](t)?new t(e,n):ax.type.is.tag(t)?t():t(e,n))},ax.tag.proxy={},ax.tag.collection={},ax.type.is.not=new Proxy({},{get:(t,e)=>{if(ax.type.is["function"](ax.type.is[e]))return t=>!ax.type.is[e](t);ax["throw"](`ax.type.is does not support .${e}()`)}}),ax.type.is.undefined=function(t){return void 0===t},ax.type.is.object=function(t){return"object"==typeof t},ax.type.is.promise=function(t){return t instanceof Promise},ax.type.is["null"]=function(t){return null===t},ax.type.is.tag=function(t){return""+ax.a.tagProxyFunction==""+t},ax.type.is.number=function(t){return"number"==typeof t},ax.type.is.nodelist=function(t){return t instanceof NodeList},ax.type.is.array=function(t){return t instanceof Array},ax.type.is["function"]=function(t){return"function"==typeof t},ax.type.is["class"]=function(t){return this["function"](t)&&"class"===(""+t).slice(0,5)},ax.type.is.node=function(t){return t instanceof Node},ax.type.is.string=function(t){return"string"==typeof t},ax.factory.pipeline.push(function(t){return t}),ax.factory.object.base={$tag:"span"},ax.factory.object.traverse=function(t,e){return t?/^\s*\^/.test(e)?(e=e.replace(/^\s*\^\s*/,""))?t.closest(e):t.parentElement:/^\s*$/.test(e)?t:t.querySelector(e):null},ax.factory.object.query=function(t,e=[]){return new Proxy(function(){},ax.factory.object.query.proxy.shim(t,e))},ax.factory.object.element=function(t){t={...this.base,...t};let e=document.createElement(t.$tag);return e.$object=t,ax.factory.pipeline.forEach(function(t){e.$object=t(e.$object)}),this.element.properties.init(this.element.properties(e).$render())},ax.tag.collection.proxy=(()=>new Proxy(ax.tag.collection["function"],ax.tag.collection.shim)),ax.tag.collection["function"]=(()=>{}),ax.tag.collection.shim={get:(t,e)=>(function(...t){return t.map(function(t){return ax.a[e](t)})})},ax.tag.proxy.shim={get:(t,e)=>"$$"===e?ax.tag.collection.proxy():function(t=null,n={}){return t=ax.tag.proxy.shim.component(t),n=ax.tag.proxy.shim.attributes(e,n),ax.factory.object({...t,...n})}},ax.tag.proxy["function"]=function(t){let e=document.createElement("div");return e.innerHTML=t,e.childNodes},ax.factory.object.element.properties=function(t){return this.properties.render(this.properties.events(this.properties.accessors(this.properties.define(t))))},ax.factory.object.element.process=function(t){return ax.factory.pipeline.forEach(function(e){t.$object=e(t.$object)}),this.process.properties(t)},ax.factory.object.element.append=function(t,e){let n=ax.factory(e);ax.type.is.array(n)?n.forEach(function(e){t.appendChild(e)}):t.appendChild(n)},ax.factory.object.query.proxy={},ax.factory.object.base.$$=function(t){return ax.factory.object.query(Array.from(this.querySelectorAll(t)))},ax.factory.object.base.$=function(...t){let e=this;return t.forEach(function(t){ax.type.is.array(t)?e=e.$(...t):/^\^\S*$/.test(t)?e=ax.factory.object.traverse(e,t):/\^/.test(t)?(t=t.split(/(\^\S*)/g),e=e.$(...t)):e=ax.factory.object.traverse(e,t)}),e},ax.tag.proxy.shim.component=function(t){let e=ax.type.is;return e.node(t)?{$nodes:[t]}:e.nodelist(t)?{$nodes:[Array.from(t)]}:e.array(t)?{$nodes:t}:e.object(t)?t:e["function"](t)?{$nodes:[t]}:(e.undefined(t)&&ax.factory.undefined(),{$text:t})},ax.tag.proxy.shim.attributes=function(t,e){let n=(t.match(/^([\w|-]+)/)||[])[1],o=(t.match(/#([\w|-]+)/)||[])[1],r=(t.match(/\.([\.|\w|-]+)/)||[])[1];return n&&(e.$tag=n),o&&(e.id=o),r&&(e["class"]=r.replace(/\./g," ")),e},ax.a=new Proxy(ax.tag.proxy["function"],ax.tag.proxy.shim),ax.factory.object.element.properties.accessors=function(t){return this.accessors.nodes(this.accessors.html(this.accessors.text(this.accessors.on(this.accessors.state(t)))))},ax.factory.object.element.properties.render=function(t){let e=this.render;return t.$render=function(){return t.$object.hasOwnProperty("$text")?e.text(t):t.$object.hasOwnProperty("$html")?e.html(t):t.$object.hasOwnProperty("$nodes")?e.nodes(t):t},t},ax.factory.object.element.properties.init=function(t){return t.$object.hasOwnProperty("$init")&&t.appendChild(ax.factory({$tag:"script",type:"text/javascript",$html:"(function(){let script=document.currentScript;let element=script.parentElement;script.remove();element.$init( element, element.$state() );})()"})),t},ax.factory.object.element.properties.events=function(t){return this.events.$on(this.events.$off(t))},ax.factory.object.element.properties.define=function(t){for(let e in t.$object)if(t.$object.hasOwnProperty(e))if(/[a-zA-Z]/.test(e[0])){let n=t.$object[e];if(n||""===n){let o=ax.type.is.object(n);o&&"data"===e?this.define.data(t,n):o&&"style"===e?this.define.style(t,n):this.define.attribute(t,e,n)}}else"$text"!=e&&"$nodes"!=e&&"$html"!=e&&"$state"!=e&&"$on"!=e&&(t[e]=t.$object[e]);return t},ax.factory.object.query.proxy.shim=function(t,e){return{get:ax.factory.object.query.proxy.shim.get(t,e),set:ax.factory.object.query.proxy.shim.set(t,e),apply:ax.factory.object.query.proxy.shim.apply(t,e)}},ax.factory.object.element.properties.render.text=function(t){let e=t.$text();for(ax.type.is["function"](e)&&(e=e.call(t,t,t.$state()));t.childNodes.length;)t.removeChild(t.lastChild);return t.appendChild(document.createTextNode(e)),t},ax.factory.object.element.properties.render.html=function(t){let e=t.$html();return ax.type.is["function"](e)&&(e=e.call(t,t,t.$state())),t.innerHTML=e,t},ax.factory.object.element.properties.render.nodes=function(t){let e=t.$nodes();for(ax.type.is["function"](e)&&(e=e.call(t,t,t.$state()));t.firstChild;)t.firstChild.remove();if(ax.type.is.array(e))e.forEach(function(e){null!=(e=ax.factory(e))&&t.appendChild(e)});else{let n=ax.factory(e);null!=n&&t.appendChild(n)}return t},ax.factory.object.element.properties.accessors.text=function(t){let e=this;return Object.defineProperty(t,"$text",{get:function(){return e.text.query(t)},set:function(n){e.text.set(t,n)}}),t},ax.factory.object.element.properties.accessors.html=function(t){let e=this;return Object.defineProperty(t,"$html",{get:function(){return e.html.query(t)},set:function(){e.html.set(t,nodes)}}),t},ax.factory.object.element.properties.accessors.state=function(t){let e=this;return Object.defineProperty(t,"$state",{get:function(){return e.state.query(t)},set:function(n){e.state.set(t,n)}}),t},ax.factory.object.element.properties.accessors.on=function(t){let e=this;return Object.defineProperty(t,"$on",{get:function(){return e.on.query(t)},set:function(n){e.nodes.set(t,n)}}),t},ax.factory.object.element.properties.accessors.nodes=function(t){let e=this;return Object.defineProperty(t,"$nodes",{get:function(){return e.nodes.query(t)},set:function(n){e.nodes.set(t,n)}}),t},ax.factory.object.element.properties.events.$on=function(t){if(t.$object.hasOwnProperty("$on"))for(let e in t.$object.$on)t.addEventListener(e.split(":")[0],function(n){t.$object.$on[e]&&t.$object.$on[e].call(this,n,t,t.$state())});return t},ax.factory.object.element.properties.events.$off=function(t){return t.$off=function(e){t.removeEventListener(e.split(":")[0],t.$object.$on[e])},t},ax.factory.object.element.properties.define.style=function(t,e){let n="";Object.keys(e).forEach(function(t){let o=this.kebab(t);n+=o+": "+e[t]+"; "}.bind(this)),this.attribute(t,"style",n)},ax.factory.object.element.properties.define.attribute=function(t,e,n){let o=document.createAttribute(e);o.value=n,t.setAttributeNode(o)},ax.factory.object.element.properties.define.kebab=function(t){return(t[0].match(/[A-Z]/)?"-":"")+t.replace(/([a-zA-Z])(?=[A-Z])/g,"$1-").toLowerCase()},ax.factory.object.element.properties.define.data=function(t,e){this.data.attribute(t,["data"],e)},ax.factory.object.query.proxy.shim.get=function(t,e){return function(n,o){return/^\d+$/.test(o)?t[o]:(t.forEach(function(n,r){let c=n[o];ax.type.is["function"](c)?e[r]=c:t[r]=c}),ax.factory.object.query(t,e))}},ax.factory.object.query.proxy.shim.set=function(t){return function(e,n,o){return t.forEach(function(t){t[n]=o}),!0}},ax.factory.object.query.proxy.shim.apply=function(t,e){return function(n,o,r){return e.length?(t.forEach(function(n,o){t[o]=e[o].call(n,...r)}),ax.factory.object.query(t)):t}},ax.factory.object.element.properties.accessors.state.set=function(t,e){if(t.$object.$state!==e)return t.$object.$state=e,t.$object.$update?t.$object.$update.call(t,t,t.$object.$state)&&t.$render():t.$render(),t},ax.factory.object.element.properties.accessors.state.query=function(t){let e=this;return function(){return 1===arguments.length?e.set(t,arguments[0]):arguments.length?e.set(t,arguments):t.$object.$state}},ax.factory.object.element.properties.accessors.text.set=function(t,e){return delete t.$object.$html,delete t.$object.$nodes,t.$object.$text=e,t.$render(),t},ax.factory.object.element.properties.accessors.text.query=function(t){let e=this;return function(){return 1===arguments.length?e.set(t,arguments[0]):arguments.length?e.set(t,arguments.join()):t.$object.$text}},ax.factory.object.element.properties.accessors.on.set=function(t,e){for(let n in e)t.$off(n),t.$object.$on[n]=e[n],t.addEventListener(n.split(":")[0],t.$object.$on[n]);return t},ax.factory.object.element.properties.accessors.on.query=function(t){let e=this;return function(){return 1===arguments.length?e.set(t,arguments[0]):arguments.length?e.set(t,arguments.join()):t.$object.$on}},ax.factory.object.element.properties.accessors.nodes.set=function(t,e){return delete t.$object.$text,delete t.$object.$html,t.$object.$nodes=e,t.$render(),t},ax.factory.object.element.properties.accessors.nodes.query=function(t){let e=this;return function(){return 1===arguments.length?e.set(t,arguments[0]):arguments.length?e.set(t,arguments):t.$object.$nodes}},ax.factory.object.element.properties.accessors.html.set=function(t,e){return delete t.$object.$text,delete t.$object.$nodes,t.$object.$html=e,t.$render(),t},ax.factory.object.element.properties.accessors.html.query=function(t){let e=this;return function(){return 1===arguments.length?e.set(t,arguments[0]):arguments.length?e.set(t,arguments.join()):t.$object.$html}},ax.factory.object.element.properties.define.data.attribute=function(t,e,n){let o=ax.factory.object.element.properties.define;if(ax.type.is.string(n)){let r=e.join("-");o.attribute(t,r,n)}else Object.keys(n).forEach(function(r){o.kebab(r);this.attribute(t,e.concat(r),n[r])}.bind(this))};
